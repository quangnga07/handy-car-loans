<?php// Define a destinationif (strpos('assets/misc/uploadify.php', __FILE__) > 0) {    $TARGETPATH = str_replace('assets/misc/uploadify.php', '', __FILE__) . 'temp';} else {    $FULLPATH = str_replace('\\', '/', __FILE__);    $TARGETPATH = str_replace('assets/misc/uploadify.php', '', $FULLPATH) . 'temp';}function generate_random() {    $str = 'abcdefghidklmonplsfsajflsajdfsdfjhklsajdfklsdf';    $gen = '';    for ($i = 0; $i < 20; $i++) {        $j = rand(1, strlen($str) - 1);        $gen .= $str[$j];    }    return md5($gen);}function is_exists($targetFile) {    if (file_exists($targetFile)) {        return TRUE;    } else {        return FALSE;    }}if (!empty($_FILES)) {    $tempFile = $_FILES['Filedata']['tmp_name'];    //$targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;    $targetPath = $TARGETPATH;    //$path = dirname(__FILE__);    //$targetPath = $path.'/'.$targetFolder;    // Validate the file type    $fileTypes = array('jpg', 'jpeg', 'pdf', 'doc', 'docx'); // File extensions    $filename = $_FILES['Filedata']['name'];    $fileParts = pathinfo($_FILES['Filedata']['name']);    if (in_array($fileParts['extension'], $fileTypes)) {        //$str_name = md5(generate_random());        $targetFile = rtrim($targetPath, '/') . '/' .$filename;                if(is_exists($targetFile)){            $targetFile = rtrim($targetPath, '/') . '/' . $fileParts['filename'] .'(1).'.$fileParts['extension'];        }                move_uploaded_file($tempFile, $targetFile);        //echo $filename;       echo $targetFile;    } else {        echo FALSE;    }}?>