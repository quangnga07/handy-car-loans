<?php/*  Uploadify  Copyright (c) 2012 Reactive Apps, Ronnie Garcia  Released under the MIT License <http://www.opensource.org/licenses/mit-license.php> */// Define a destinationif(strpos('assets/misc/uploadify_attachments.php', __FILE__) > 0){    $TARGETPATH = str_replace('assets/misc/uploadify_attachments.php', '', __FILE__).'uploads/client_attachments'; }else{    $FULLPATH = str_replace('\\','/',__FILE__);    $TARGETPATH = str_replace('assets/misc/uploadify_attachments.php', '', $FULLPATH).'uploads/client_attachments'; }//$targetFolder = '/ecg1emr/dev/uploads/client_attachments'; // Relative to the root//$targetFolder = 'uploads/client_photo'; //$FULLPATH = str_replace('\\','/',__FILE__);//$TARGETPATH = str_replace('assets/misc/uploadify_attachments.php', '', $FULLPATH).'uploads/client_attachments'; function generate_random() {    $str = 'abcdefghidklmonplsfsajflsajdfsdfjhklsajdfklsdf';    $gen = '';    for ($i = 0; $i < 20; $i++) {        $j = rand(1, strlen($str)-1);        $gen .= $str[$j];    }    return md5($gen);}if (!empty($_FILES)) {    $tempFile = $_FILES['Filedata']['tmp_name'];    //$targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;    //$targetPath = $TARGETPATH;        //$path = dirname(__FILE__);    //$path = str_replace('');    $targetPath = $TARGETPATH;    //$targetPath = $path.'/'.$targetFolder;    // Validate the file type    $fileTypes = array('jpg', 'jpeg', 'gif', 'png'); // File extensions    $fileParts = pathinfo($_FILES['Filedata']['name']);    $str_name = md5(generate_random());    $targetFile = rtrim($targetPath, '/') . '/' . $str_name . '.' . $fileParts['extension'];    move_uploaded_file($tempFile, $targetFile);    echo $str_name . '.' . $fileParts['extension'];}?>